{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block head_title %}{{ post.title }}{% endblock head_title %}

{% block content %}
<h1>{{ post.title }}</h1>
<p>{{ post.content }}</p>

<div class="col-12 col-md-4 mb-2 mb-md-0">
    <a href="{% url 'home' %}" class="btn btn-dark btn-block">Back</a>
</div>

<hr>
<h2>Comments</h2>
<div class="comments">
    {% for comments in comment %}
        <div class="comment">
            <p><strong>{{ comment.author.username }}</strong> ({{ comment.post_date }})</p>
            <p>{{ comment.content }}</p>
        </div>
        <div class="col-12 col-md-4">
            <form action="{% url 'likeposts' post.pk %}" method="POST">
                {% csrf_token %}
                {% if user.is_authenticated %}
                    {% if liked %}
                    <button type="submit" name="postid" value="{{ post.id }}" class="btn btn-danger btn-block">
                        Unlike {{ totallikes }}
                    </button>
                    {% else %}
                    <button type="submit" name="postid" value="{{ post.id }}" class="btn btn-warning btn-block">
                        <span class="text-danger">&hearts;</span> Like {{ totallikes }} <span class="text-danger">&hearts;</span>
                    </button>
                    {% endif %}
                {% else %}
                <a href="{% url 'login' %}" class="btn btn-warning btn-block">Login to like</a>
                {% endif %}
            </form>
        </div>
        <hr>
    {% endfor %}
</div>

<h2>Add a comment</h2>
<form method="post">
    {% csrf_token %}
    {{ form|crispy }}
    <button type="submit" class="btn btn-primary">Post Comment</button>
</form>
{% endblock content %}